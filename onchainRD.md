  <summary>
  # TESOLA NFT Staking Program - 공식 문서

  ## 목차
  1. 개요
  2. 기본 스테이킹 기능
  3. 긴급 언스테이킹 시스템
  4. 거버넌스 시스템
  5. 레퍼럴 시스템
  6. 소셜 활동 인증 시스템
  7. 기술적 구현
  8. 계정 구조 및 PDA 시드
  9. 보안 고려사항
  10. FAQ

  ---

  ## 1. 개요

  TESOLA NFT Staking Program은 Solana 블록체인에서 NFT 스테이킹 서비스를 제공하는 온체인 프로그램입니다. 이
  프로그램은 사용자들이 NFT를 스테이킹하고 보상을 받을 수 있게 함과 동시에, 다양한 고급 기능을 통해 사용자 참여와
  커뮤니티 구축을 촉진합니다.

  **프로그램 ID**: `4SfUyQkbeyz9jeJDsR5XiUf8DATVZJXtGG4JUsYsWzTs`

  ### 주요 기능
  - 기본 NFT 스테이킹 및 보상 청구
  - 긴급 언스테이킹 옵션
  - 온체인 거버넌스 시스템
  - 레퍼럴 프로그램
  - 소셜 미디어 활동 인증 및 보상

  ---

  ## 2. 기본 스테이킹 기능

  ### 스테이킹 개요
  TESOLA NFT Staking Program은 사용자가 다양한 기간 동안 NFT를 스테이킹할 수 있는 기능을 제공합니다. 스테이킹된
  NFT는 기간과 NFT 등급에 따라 차등화된 보상을 제공받습니다.

  ### 스테이킹 관련 명령어
  - `initialize`: 스테이킹 풀 초기화
  - `stake_nft`: NFT 스테이킹
  - `unstake_nft`: NFT 언스테이킹
  - `claim_rewards`: 스테이킹 보상 청구
  - `get_user_staked_nfts`: 사용자의 스테이킹된 NFT 목록 조회

  ### 보상 시스템
  - **기본 보상률**: 관리자가 설정한 기본 보상률에 따라 일일 보상 계산
  - **등급 승수**: NFT 등급에 따른 보상 승수 적용 (일반: 1x, 희귀: 2x, 에픽: 4x, 전설: 8x)
  - **장기 스테이킹 보너스**: 30일 이상 스테이킹 시 추가 20% 보너스 적용
  - **컬렉션 보너스**: 스테이킹된 NFT 수량에 따른 추가 보너스 (최대 5개 이상: 1% 추가)
  - **시간 기반 승수**: 스테이킹 기간이 길어질수록 시간 기반 보상 증가 (매 30일마다 5% 증가, 최대 50%)
  - **복리 옵션**: 사용자가 선택하면 보상을 자동으로 재투자하여 복리 효과 적용

  ---

  ## 3. 긴급 언스테이킹 시스템

  ### 개요
  긴급 언스테이킹 시스템은 사용자가 약정된 스테이킹 기간이 완료되기 전에 NFT를 회수할 수 있는 유연한 옵션을
  제공합니다. 이 기능은 수수료를 부과하는 대신 즉시 NFT를 회수할 수 있게 합니다.

  ### 기능
  - **emergency_unstake_nft**: 스테이킹 기간 완료 전 NFT 회수
  - **동적 수수료 계산**: 완료된 스테이킹 기간 비율에 따라 차등화된 수수료 부과
  - **부분 보상 계산**: 실제 스테이킹된 기간에 따른 부분 보상 계산 및 지급

  ### 수수료 구조
  - 수수료 = 기본 수수료 × (1 - 완료 비율)
  - 예: 50% 완료 시 기본 수수료의 50%만 부과

  ---

  ## 4. 거버넌스 시스템

  ### 개요
  온체인 거버넌스 시스템은 스테이커들이 프로젝트의 결정에 직접 참여할 수 있도록 합니다. 사용자들은 제안을 생성하고,
   투표하며, 통과된 제안을 실행할 수 있습니다.

  ### 주요 기능
  - **initialize_enhanced_governance**: 거버넌스 시스템 초기화
  - **create_enhanced_proposal**: 새로운 제안 생성
  - **cast_enhanced_vote**: 제안에 대한 투표
  - **execute_enhanced_proposal**: 승인된 제안 실행

  ### 거버넌스 매개변수
  - **투표 지연**: 제안 생성 후 투표 시작까지의 대기 시간
  - **투표 기간**: 투표가 진행되는 기간
  - **제안 임계값**: 제안 생성에 필요한 최소 투표력
  - **쿼럼**: 제안 통과에 필요한 최소 투표 수
  - **최소 승인 비율**: 제안 통과에 필요한 찬성 비율
  - **타임락 지연**: 투표 완료 후 실행까지의 대기 시간

  ### 투표력 시스템
  - 투표력은 스테이킹된 NFT 수량에 비례
  - 각 사용자의 투표는 스테이킹된 NFT 수에 따라 가중치 부여

  ---

  ## 5. 레퍼럴 시스템

  ### 개요
  레퍼럴 시스템은 사용자들이 친구를 플랫폼에 초대하고 보상을 받을 수 있는 인센티브 프로그램입니다. 사용자는 고유한
  레퍼럴 코드를 생성하고 공유하여 보상을 받을 수 있습니다.

  ### 주요 기능
  - **generate_referral_code**: 고유 레퍼럴 코드 생성
  - **register_referral**: 레퍼럴 코드로 사용자 등록
  - **claim_referral_rewards**: 레퍼럴 보상 청구

  ### 보상 구조
  - **기본 보상**: 레퍼럴된 사용자당 기본 보상 지급
  - **활성 레퍼럴 보상**: 실제로 NFT를 스테이킹한 레퍼럴에 대해 추가 보상
  - **보상 지급 주기**: 일일 계산, 청구 시 지급

  ---

  ## 6. 소셜 활동 인증 시스템

  ### 개요
  소셜 활동 인증 시스템은 사용자들의 소셜 미디어 활동을 검증하고 보상하는 메커니즘을 제공합니다. 트위터, 텔레그램,
  디스코드 등 다양한 플랫폼에서의 참여를 인증하고 보상합니다.

  ### 주요 기능
  - **initialize_enhanced_social_verifier**: 소셜 활동 인증기 초기화
  - **init_user_enhanced_social_activity**: 사용자 소셜 활동 계정 초기화
  - **verify_enhanced_social_activity**: 소셜 활동 인증
  - **claim_enhanced_social_reward**: 인증된 활동에 대한 보상 청구

  ### 지원되는 플랫폼
  - **트위터**: 트윗, 리트윗, 좋아요 등 활동 인증
  - **텔레그램**: 메시지, 그룹 참여 등 활동 인증
  - **디스코드**: 메시지, 채널 참여 등 활동 인증

  ### 보상 제한
  - **일일 한도**: 하루에 청구할 수 있는 최대 보상 한도
  - **쿨다운 기간**: 동일 유형의 활동 인증 사이에 필요한 최소 대기 시간

  ---

  ## 7. 기술적 구현

  ### 프로그램 구조
  - **모듈식 설계**: 각 기능이 별도의 모듈로 구현되어 있으나, 하나의 IDL로 통합
  - **오류 코드 체계**: 각 기능별로 명확히 구분된 오류 코드 범위 사용
    - 기본 기능: 6000-6019
    - 거버넌스: 6020-6039
    - 레퍼럴: 6040-6059
    - 소셜 활동: 6060-6089

  ### 기술 스택
  - **프로그래밍 언어**: Rust
  - **프레임워크**: Anchor Framework
  - **블록체인**: Solana
  - **토큰 표준**: SPL Token, SPL Associated Token

  ---

  ## 8. 계정 구조 및 PDA 시드

  ### 주요 계정 구조체
  - **PoolState**: 스테이킹 풀 설정 및 상태 정보
  - **StakeInfo**: 개별 스테이킹된 NFT 정보
  - **UserStakingInfo**: 사용자별 스테이킹 정보
  - **EnhancedGovernanceSettings**: 거버넌스 시스템 설정
  - **EnhancedProposal**: 제안 정보
  - **EnhancedVote**: 투표 정보
  - **UserReferralStats**: 사용자 레퍼럴 통계
  - **ReferralRecord**: 레퍼럴 관계 기록
  - **EnhancedSocialActivityVerifier**: 소셜 활동 인증기 설정
  - **EnhancedUserSocialActivity**: 사용자 소셜 활동 정보
  - **EnhancedSocialActivityProof**: 소셜 활동 증명

  ### PDA 시드
  - **pool_state**: 풀 상태 정보 저장
  - **stake**: NFT 스테이킹 정보 저장
  - **escrow**: NFT 에스크로 권한
  - **user_staking**: 사용자 스테이킹 정보
  - **governance_settings**: 거버넌스 설정
  - **proposal**: 제안 정보
  - **vote**: 투표 정보
  - **referral_stats**: 레퍼럴 통계
  - **referral_record**: 레퍼럴 관계 기록
  - **social_verifier**: 소셜 인증기 설정
  - **enhanced_social**: 사용자 소셜 활동
  - **enhanced_proof**: 소셜 활동 증명

  ---

  ## 9. 보안 고려사항

  ### 권한 체크
  - 모든 명령어에 적절한 소유자 및 관리자 권한 검증 구현
  - PDA를 통한 안전한 프로그램 간 상호작용

  ### 자금 안전성
  - 에스크로 메커니즘을 통한 NFT 안전한 보관
  - 타임락 및 쿼럼을 통한 거버넌스 안전장치

  ### 오류 처리
  - 포괄적인 오류 코드 및 메시지로 안전한 예외 처리
  - 산술 연산 오버플로우 방지를 위한 검사

  ---

  ## 10. FAQ

  ### Q: 스테이킹 기간은 얼마나 설정할 수 있나요?
  A: 최소 7일에서 최대 365일까지 스테이킹 기간을 설정할 수 있습니다.

  ### Q: 긴급 언스테이킹 시 수수료는 어떻게 계산되나요?
  A: 수수료는 남은 스테이킹 기간에 비례하여 부과됩니다. 완료 비율이 높을수록 수수료는 낮아집니다.

  ### Q: 거버넌스 제안을 생성하려면 어떤 조건이 필요한가요?
  A: 최소한의 투표력(스테이킹된 NFT 수량)이 필요하며, 이는 거버넌스 설정의 제안 임계값에 따라 결정됩니다.

  ### Q: 레퍼럴 코드는 어떻게 생성하나요?
  A: `generate_referral_code` 명령을 사용하여 고유한 8바이트 레퍼럴 코드를 생성할 수 있습니다.

  ### Q: 소셜 활동 인증은 어떤 방식으로 이루어지나요?
  A: 인증된 검증자가 사용자의 소셜 미디어 활동을 검증하여 온체인에 기록합니다. 사용자는 이를 바탕으로 보상을 청구할
   수 있습니다.

  ---

  **기술 지원 및 문의**: [지원 이메일 또는 디스코드 링크]
  **GitHub 레포지토리**: [GitHub 링크]
  **프로그램 버전**: v1.0.0
  **최종 업데이트**: [날짜]
  </summary>.